# 大作业 Bookstore 的总体设计文档
BY张天泽
## 1. 功能设计
### 1.1 用户身份创建与验证
创建：创建新的用户。
验证：根据用户提交的用户名和密码，确定用户的操作权限。
### 1.2 图书查询
根据用户的输入，在对应的图书信息数据库寻找匹配的图书，并输出。
### 1.3 图书信息维护
录入：根据店员的输入，检查是否与现有的数据重复，并对图书信息库做出相应的添加。
修改：根据店员的输入，检查是否与现有的数据相匹配，并对图书信息库做出相应的修改。
### 1.4 图书销售
根据顾客所提供的ISBN编号及数量，检查库存是否足够，并对图书信息库、销售信息库、盈利信息库做出相应的修改。
### 1.5 图书采购
根据店员提供的 ISBN 号，检查是否为新书，如是，则应当输入其完整信息。并作出相应的修改。
### 以上店员的操作均会在工作记录中记录。
### 1.6 店长的查询
店长有权限访问所有数据库，并对其进行查询操作。
### 所有操作都会被工作日志记录。

## 2. 用户交互设计
### 2.1 用户身份交互
`请选择 1.登录 2.注册 0.退出`
（1）登录界面：
`请选择您的身份 1.游客 2.顾客 3.销售人员 4.店长 0.返回`
`请输入用户名：（ex为退出）`
`请输入密码：（ex为退出）`
游客登录后界面：
`欢迎光临书店！1.登出 0.返回`
顾客登录后界面：
`欢迎光临书店！1.登出 2.查询图书 3.购买图书 0.返回`
销售人员登录后界面：
`欢迎登录！1.登出 2.查询图书 3.购买图书 4.进货 5.图书信息录入 6.图书信息修改 0.返回`
店长登录后界面：
`欢迎登录！1.登出 2.查询图书 3.购买图书 4.进货 5.图书信息录入 6.图书信息修改 7.查询采购信息 8.查询销售情况 9.查询盈利信息 10.查看员工工作情况报告 11.系统的整体工作日志 0.返回`
（2）注册界面
`请选择您的身份 1.游客 2.顾客 0.返回`
`请输入用户名：（ex为退出）`
`请输入密码：（ex为退出）`
### 2.2 图书查询
```
欢迎进入查询界面！（输入0为退出）
1.输入ISBN编号：（可以留空）
2.输入书名：（可以留空）
3.输入作者：（可以留空）
4.输入关键字：（关键字间用空格隔开，可以留空）
```
`对不起，没有匹配的图书！`
```
下面是匹配的图书：
	ISBN 号				书名		作者		库存量		单价
  14787578937717347219   ohh      auth      10        30
```
### 2.3 图书查询
```
欢迎进入购买界面！（输入0为退出）
输入ISBN编号：
```
`对不起，没有匹配的图书！`
```
下面是匹配的图书：
	ISBN 号				书名		作者		库存量		单价
  14787578937717347219   ohh      auth      10        30
是否购买？1.购买 0.返回
```
`请输入购买数量：（输入0为退出）`
`对不起，库存不足！最多购买10本，是否继续购买？1.购买 0.返回`
`购买数量：5本，请确认购买：1.购买 0.返回`
### 2.4 图书信息录入
```
请录入图书信息——
1.ISBN号：
2.书名：
3.作者：
4.关键字：
5.库存量：
6.单价：
录入成功！
```
### 2.5 图书信息修改
```
请输入图书ISBN号：
请修改（直接换行则不改）——
1.书名：(XXX)
2.作者：(XXX)
3.关键字：(XXX)
4.库存量：(XXX)
5.单价：(XXX)
修改成功！
```
### 2.6 店长的查询
#### 2.6.1 查询采购信息
`欢迎进入查询采购信息界面！请输入查询时间段：`
```
时间段内的采购信息——
图书的 ISBN 号         数量  单价
43789192738738124332   50    30
85437583247827812384   20    35
```
#### 2.6.2 查询销售情况
`欢迎进入查询销售情况界面！请输入查询时间段：`
```
时间段内的销售信息——
图书的 ISBN 号         数量  单价
43789192738738124332   50    30
85437583247827812384   20    35
```
#### 2.6.3 查询盈利信息
`欢迎进入查询盈利信息界面！请输入查询时间段：`
```
时间段内的盈利信息——
收入：32780
支出：23200
盈利：9580
```
#### 2.6.4 查询员工工作情况报告
`欢迎进入查询员工工作情况报告界面！请输入查询员工：`
`抱歉！不存在该员工！ 0.返回`
```
该员工的工作信息——
操作类型 对象
```
#### 2.6.5 输出工作日志
`欢迎进入输出工作日志界面！请确认输出：1.输出 0.返回`

## 3. 数据库设计
D1用户数据库：存储用户名（string型）、密码（string型）
D2图书信息库：ISBN 号（string）、书名（string）、作者（string）、关键字（vector）、库存量（int）、单价（float）；
D3销售信息库：ISBN 号(string)，销售时间(string)，销售数量(int)，总金额(float)
D4盈利信息库：时间(string)，收支状况(float)
D5采购信息库：采购时间(stirng)，ISBN 号(stirng)，采购数量(int)，总金额(float)
D6员工工作信息库：员工名(stirng)，时间(stirng)，操作类型(stirng)，操作对象(stirng)
D0系统工作日志：用户名(stirng)，用户角色(stirng)，时间(stirng)，操作类型(stirng)，操作对象(stirng)
## 4. 类、结构体设计
类：游客、顾客、销售人员、店长。
结构体：书（储存图书所有信息）。
